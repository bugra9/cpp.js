"use strict";(self.webpackChunk_cpp_js_website=self.webpackChunk_cpp_js_website||[]).push([[3133],{8447:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var s=n(6106),i=n(945);const l={},r="File System",o={id:"api/javascript/filesystem",title:"File System",description:"Cpp.js uses a virtual file system in the browser. To easily interact with this virtual file system, a set of helper JavaScript functions is provided. These functions:",source:"@site/docs/api/javascript/filesystem.md",sourceDirName:"api/javascript",slug:"/api/javascript/filesystem",permalink:"/docs/api/javascript/filesystem",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1734793756e3,frontMatter:{},sidebar:"API",previous:{title:"Overview",permalink:"/docs/api/javascript/overview"},next:{title:"Utility Functions",permalink:"/docs/api/javascript/utility-functions"}},a={},c=[{value:"Examples",id:"examples",level:3}];function d(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"file-system",children:"File System"})}),"\n",(0,s.jsx)(t.p,{children:"Cpp.js uses a virtual file system in the browser. To easily interact with this virtual file system, a set of helper JavaScript functions is provided. These functions:"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Function"}),(0,s.jsx)(t.th,{children:"Platform"}),(0,s.jsx)(t.th,{children:"Input"}),(0,s.jsx)(t.th,{children:"Output"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"generateVirtualPath"}),(0,s.jsx)(t.td,{children:"browser"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{}),(0,s.jsxs)(t.td,{children:["Creates a directory at ",(0,s.jsx)(t.code,{children:"/virtual/automounted/{{RANDOM}}"})]})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"autoMountFiles"}),(0,s.jsx)(t.td,{children:"browser"}),(0,s.jsx)(t.td,{children:"FileList | [File]"}),(0,s.jsx)(t.td,{children:"[string]"}),(0,s.jsx)(t.td,{children:"Auto mount files."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"getFileBytes"}),(0,s.jsx)(t.td,{children:"browser, node.js"}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:"Uint8Array"}),(0,s.jsx)(t.td,{children:"Returns the file at the specified path in bytes."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"getFileList"}),(0,s.jsx)(t.td,{children:"browser, node.js"}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:"[{ path: string, size: number }]"}),(0,s.jsx)(t.td,{children:"Returns the files with path and size at the specified path."})]})]})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.h3,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Opening file from file input."})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'// HTML\n<input class="input-file" type="file" name="file" id="file" onChange="onFileChange" />\n// JS\nfunction onFileChange({ target }) {\n  const files = Module.autoMountFiles([target.file]);\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Opening files from file input. (multiple)"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'// HTML\n<input class="input-file" type="file" name="files[]" id="file" onChange="onFileChange" multiple />\n// JS\nfunction onFileChange({ target }) {\n  const result = Module.autoMountFiles(target.files);\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Opening a file from the network."})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const fileData = await fetch('test/polygon.geojson');\nconst file = new File([await fileData.blob()], \"polygon.geojson\");\nconst result = Module.autoMountFiles([file]);\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:'Download file from "/output" path on the browser.'})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const filePath = '/virtual/test.json';\nconst fileBytes = Module.getFileBytes(filePath);\nconst fileName = filePath.split('/').pop();\nsaveAs(fileBytes, filename);\n\nfunction saveAs(fileBytes, fileName) {\n   const blob = new Blob([fileBytes]);\n   const link = document.createElement('a');\n   link.href = URL.createObjectURL(blob);\n   link.download = fileName;\n   link.click();\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Displays information about the files."})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"const files = Module.getFileList();\nfiles.forEach((fileInfo) => {\n  console.log(`file path: ${fileInfo.path}, file size: ${fileInfo.size}`);\n});\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(t.admonition,{type:"info",children:(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Browser Functions:"})," You can access the browser functions from ",(0,s.jsx)(t.a,{href:"https://github.com/bugra9/cpp.js/blob/main/packages/cpp.js/src/assets/browser.js",children:"this link"}),".",(0,s.jsx)(t.br,{}),"\n",(0,s.jsx)(t.strong,{children:"Node.js Functions:"})," You can access the Node.js functions from ",(0,s.jsx)(t.a,{href:"https://github.com/bugra9/cpp.js/blob/main/packages/cpp.js/src/assets/node.js",children:"this link"}),"."]})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},945:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(7378);const i={},l=s.createContext(i);function r(e){const t=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:t},e.children)}}}]);