"use strict";(self.webpackChunk_cpp_js_website=self.webpackChunk_cpp_js_website||[]).push([[445],{9824:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"api/cpp-bindings/data-types","title":"Data Types","description":"Cpp.js efficiently bridges C++ and JavaScript, ensuring seamless type conversions. This page will cover primitive types as well as complex data structures, including enums, vectors, and maps.","source":"@site/docs/api/cpp-bindings/data-types.md","sourceDirName":"api/cpp-bindings","slug":"/api/cpp-bindings/data-types","permalink":"/docs/api/cpp-bindings/data-types","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1744234442000,"frontMatter":{},"sidebar":"API","previous":{"title":"Overview","permalink":"/docs/api/cpp-bindings/overview"},"next":{"title":"Functions","permalink":"/docs/api/cpp-bindings/functions"}}');var d=s(7557),i=s(7266);const r={},c="Data Types",l={},a=[{value:"Primitive Types",id:"primitive-types",level:3},{value:"Vector",id:"vector",level:3},{value:"Map",id:"map",level:3},{value:"Enum",id:"enum",level:3},{value:"Class Object",id:"class-object",level:3}];function o(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"data-types",children:"Data Types"})}),"\n",(0,d.jsx)(n.p,{children:"Cpp.js efficiently bridges C++ and JavaScript, ensuring seamless type conversions. This page will cover primitive types as well as complex data structures, including enums, vectors, and maps."}),"\n",(0,d.jsx)(n.h3,{id:"primitive-types",children:"Primitive Types"}),"\n",(0,d.jsx)(n.p,{children:"When C++ code is bound to JavaScript, the data types in C++ are mapped to equivalent JavaScript types. The following table outlines these mappings:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"C++ type"}),(0,d.jsx)(n.th,{children:"JavaScript type"}),(0,d.jsx)(n.th,{children:"Cpp.js Sample"}),(0,d.jsx)(n.th,{children:"JavaScript Sample"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void"})}),(0,d.jsx)(n.td,{children:"undefined"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample()"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample()"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"bool"})}),(0,d.jsx)(n.td,{children:"true or false"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(bool a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(true)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"char"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(char a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"signed char"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(signed char a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"unsigned char"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(unsigned char a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"short"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(short a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"unsigned short"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(unsigned short a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"int"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(int a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"unsigned int"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(unsigned int a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"long"})}),(0,d.jsx)(n.td,{children:"BigInt"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(long a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9n)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"unsigned long"})}),(0,d.jsx)(n.td,{children:"BigInt"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(unsigned long a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9n)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"float"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(float a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9.9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"double"})}),(0,d.jsx)(n.td,{children:"Number"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(double a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9.9)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"int64_t"})}),(0,d.jsx)(n.td,{children:"BigInt"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(int64_t a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9n)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"uint64_t"})}),(0,d.jsx)(n.td,{children:"BigInt"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(uint64_t a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample(9n)"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::string"})}),(0,d.jsx)(n.td,{children:"String"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(std::string a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample('s')"})})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"emscripten::val"})}),(0,d.jsx)(n.td,{children:"anything"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"void sample(emscripten::val a)"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"sample('s')"})})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"This table highlights how common primitive types in C++ correspond to their closest JavaScript equivalents when using Cpp.js"}),"\n",(0,d.jsx)(n.h3,{id:"vector",children:"Vector"}),"\n",(0,d.jsx)(n.p,{children:"Cpp.js supports vectors for the following primitive types:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"C++ vector type"}),(0,d.jsx)(n.th,{children:"Javascript class name"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::vector<char>"})}),(0,d.jsx)(n.td,{children:"VectorChar"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::vector<short>"})}),(0,d.jsx)(n.td,{children:"VectorShort"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::vector<int>"})}),(0,d.jsx)(n.td,{children:"VectorInt"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::vector<int64_t>"})}),(0,d.jsx)(n.td,{children:"VectorInt64"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::vector<float>"})}),(0,d.jsx)(n.td,{children:"VectorFloat"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::vector<double>"})}),(0,d.jsx)(n.td,{children:"VectorDouble"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::vector<std::string>"})}),(0,d.jsx)(n.td,{children:"VectorString"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Additionally, Cpp.js supports vectors for any class. In JavaScript, the corresponding class name is formed by adding Vector to the beginning of the C++ class name."}),"\n",(0,d.jsx)(n.p,{children:"For example:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"std::vector<MyClass>"})," in C++ becomes ",(0,d.jsx)(n.code,{children:"VectorMyClass"})," in JavaScript."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Here is a minimal example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-cpp",metastring:'title="C++"',children:"std::vector<int> getMyVector();\nvoid setMyVector(std::vector<int>);\n"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:'const myVector = getMyVector();\n\nfor (let i = 0; i < myVector.size(); i += 1) {\n    console.log("Vector Value: ", myVector.get(i));\n}\n\nconst newMyVector = new VectorInt();\nnewMyVector.push_back(9);\nsetMyVector(newMyVector);\n'})}),"\n",(0,d.jsxs)(n.admonition,{type:"info",children:[(0,d.jsx)(n.p,{children:"For unsupported types, you can still use vectors, but you will need to manage them manually. This involves creating a module file and defining embind bindings for the required types."}),(0,d.jsx)(n.p,{children:"Here is a minimal example:"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-cpp",metastring:'title="/src/native/mycustom.i"',children:'#pragma once\n\n%module mycustom\n\n%{\nEMSCRIPTEN_BINDINGS(mycustom) {\n    emscripten::register_vector<Abc>("VectorAbc");\n}\n%}\n\n%feature("shared_ptr");\n%feature("polymorphic_shared_ptr");\n'})}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",metastring:'title="/src/index.js"',children:"import './native/mycustom.i';\n"})})]}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"Conversion Between JavaScript Arrays and C++ Vectors"}),(0,d.jsx)(n.br,{}),"\n",(0,d.jsx)(n.a,{href:"/docs/api/javascript/utility-functions",children:"The utility JavaScript functions"}),", ",(0,d.jsx)(n.code,{children:"toVector"})," and ",(0,d.jsx)(n.code,{children:"toArray"}),", are used to convert a C++ Vector into a complete JavaScript Array and vice versa, transforming a JavaScript Array into a complete C++ Vector."]}),"\n",(0,d.jsx)(n.p,{children:"Here is a minimal example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:'const myVectorArray = toArray(getMyVector());\nmyVectorArray.forEach(value => console.log("Vector Value: ", value))\n\nmyVectorArray.push(9);\nsetMyVector(toVector(VectorInt, myVectorArray));\n'})}),"\n",(0,d.jsx)(n.h3,{id:"map",children:"Map"}),"\n",(0,d.jsx)(n.p,{children:"Cpp.js supports maps for the following primitive types:"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"C++ vector type"}),(0,d.jsx)(n.th,{children:"Javascript class name"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::map<int,int>"})}),(0,d.jsx)(n.td,{children:"MapIntInt"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::map<int,std::string>"})}),(0,d.jsx)(n.td,{children:"MapIntString"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::map<std::string,std::string>"})}),(0,d.jsx)(n.td,{children:"MapStringString"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"std::map<std::string,int>"})}),(0,d.jsx)(n.td,{children:"MapStringInt"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"Here is a minimal example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-cpp",metastring:'title="C++"',children:"std::unordered_map<int, int> getMyMap();\nvoid setMyMap(std::unordered_map<int, int>);\n"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:'const myMap = getMyMap();\nconst myMapKeys = myMap.keys();\n\nfor (var i = 0; i < myMapKeys.size(); i++) {\n    var key = myMapKeys.get(i);\n    console.log("Map key/value: ", key, myMap.get(key));\n}\n\nconst newMyMap = new MapIntInt();\nnewMyMap.set(9, 9);\nsetMyMap(newMyMap);\n'})}),"\n",(0,d.jsxs)(n.admonition,{type:"info",children:[(0,d.jsx)(n.p,{children:"For unsupported types, you can still use maps, but you will need to manage them manually. This involves creating a module file and defining embind bindings for the required types."}),(0,d.jsx)(n.p,{children:"Here is a minimal example:"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-cpp",metastring:'title="/src/native/mycustom.i"',children:'#pragma once\n\n%module mycustom\n\n%{\nEMSCRIPTEN_BINDINGS(mycustom) {\n    emscripten::register_map<double, double>("MapDoubleDouble");\n}\n%}\n\n%feature("shared_ptr");\n%feature("polymorphic_shared_ptr");\n'})}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",metastring:'title="/src/index.js"',children:"import './native/mycustom.i';\n"})})]}),"\n",(0,d.jsx)(n.h3,{id:"enum",children:"Enum"}),"\n",(0,d.jsx)(n.p,{children:'In C++, an enum is a user-defined type that consists of a set of named integral constants. It can be defined using the traditional "old style" or the strongly-typed "new style" introduced in C++11 (enum class).'}),"\n",(0,d.jsx)(n.p,{children:"Here is a minimal example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-cpp",metastring:'title="C++"',children:"enum OldStyle {\n    OLD_STYLE_ONE,\n    OLD_STYLE_TWO\n};\n\nenum class NewStyle {\n    ONE,\n    TWO\n};\n"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:"const oldStyle = OldStyle.ONE;\nconst newStyle = NewStyle.TWO;\n"})}),"\n",(0,d.jsx)(n.h3,{id:"class-object",children:"Class Object"}),"\n",(0,d.jsx)(n.p,{children:"Here is a minimal example:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-cpp",metastring:'title="C++"',children:"class A {};\n\nstd::shared_ptr<A> getClassObject();\nvoid passClassObject(std::shared_ptr<A>);\n"})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",metastring:'title="JavaScript"',children:"const classObject = getClassObject();\nsetClassObject(classObject);\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},7266:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var t=s(8225);const d={},i=t.createContext(d);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);