"use strict";(self.webpackChunk_cpp_js_website=self.webpackChunk_cpp_js_website||[]).push([[9988],{7808:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var s=t(7512),i=t(2436);const l={},r="File System",o={id:"api/javascript/filesystem",title:"File System",description:"Cpp.js uses a virtual file system in the browser. To easily interact with this virtual file system, a set of helper JavaScript functions is provided. These functions:",source:"@site/docs/api/javascript/filesystem.md",sourceDirName:"api/javascript",slug:"/api/javascript/filesystem",permalink:"/docs/api/javascript/filesystem",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"API",previous:{title:"Overview",permalink:"/docs/api/javascript/overview"},next:{title:"Utility Functions",permalink:"/docs/api/javascript/utility-functions"}},a={},c=[{value:"Examples",id:"examples",level:3}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.M)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"file-system",children:"File System"})}),"\n",(0,s.jsx)(n.p,{children:"Cpp.js uses a virtual file system in the browser. To easily interact with this virtual file system, a set of helper JavaScript functions is provided. These functions:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Function"}),(0,s.jsx)(n.th,{children:"Platform"}),(0,s.jsx)(n.th,{children:"Input"}),(0,s.jsx)(n.th,{children:"Output"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"generateVirtualPath"}),(0,s.jsx)(n.td,{children:"browser"}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{}),(0,s.jsxs)(n.td,{children:["Creates a directory at ",(0,s.jsx)(n.code,{children:"/virtual/automounted/{{RANDOM}}"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"autoMountFiles"}),(0,s.jsx)(n.td,{children:"browser"}),(0,s.jsx)(n.td,{children:"FileList | [File]"}),(0,s.jsx)(n.td,{children:"[string]"}),(0,s.jsx)(n.td,{children:"Auto mount files."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"getFileBytes"}),(0,s.jsx)(n.td,{children:"browser, node.js"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Uint8Array"}),(0,s.jsx)(n.td,{children:"Returns the file at the specified path in bytes."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"getFileList"}),(0,s.jsx)(n.td,{children:"browser, node.js"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"[{ path: string, size: number }]"}),(0,s.jsx)(n.td,{children:"Returns the files with path and size at the specified path."})]})]})]}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Opening file from file input."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// HTML\n<input class="input-file" type="file" name="file" id="file" onChange="onFileChange" />\n// JS\nfunction onFileChange({ target }) {\n  const files = Module.autoMountFiles([target.file]);\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Opening files from file input. (multiple)"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// HTML\n<input class="input-file" type="file" name="files[]" id="file" onChange="onFileChange" multiple />\n// JS\nfunction onFileChange({ target }) {\n  const result = Module.autoMountFiles(target.files);\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Opening a file from the network."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const fileData = await fetch('test/polygon.geojson');\nconst file = new File([await fileData.blob()], \"polygon.geojson\");\nconst result = Module.autoMountFiles([file]);\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:'Download file from "/output" path on the browser.'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const filePath = '/virtual/test.json';\nconst fileBytes = Module.getFileBytes(filePath);\nconst fileName = filePath.split('/').pop();\nsaveAs(fileBytes, filename);\n\nfunction saveAs(fileBytes, fileName) {\n   const blob = new Blob([fileBytes]);\n   const link = document.createElement('a');\n   link.href = URL.createObjectURL(blob);\n   link.download = fileName;\n   link.click();\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Displays information about the files."})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const files = Module.getFileList();\nfiles.forEach((fileInfo) => {\n  console.log(`file path: ${fileInfo.path}, file size: ${fileInfo.size}`);\n});\n"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Browser Functions:"})," You can access the browser functions from ",(0,s.jsx)(n.a,{href:"https://github.com/bugra9/cpp.js/blob/main/packages/cpp.js/src/assets/browser.js",children:"this link"}),".",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Node.js Functions:"})," You can access the Node.js functions from ",(0,s.jsx)(n.a,{href:"https://github.com/bugra9/cpp.js/blob/main/packages/cpp.js/src/assets/node.js",children:"this link"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,i.M)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2436:(e,n,t)=>{t.d(n,{I:()=>o,M:()=>r});var s=t(5496);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);